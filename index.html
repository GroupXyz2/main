<html>
  <head>
    <title>Memory-Spiel</title>
    <style>
      /* CSS für die Karten */
      .card {
        width: 100px;
        height: 100px;
        background-color: #bbb;
        border: 1px solid #555;
        float: left;
        margin: 10px;
        text-align: center;
        font-size: 72px;
      }
      
      /* CSS für umgedrehte Karten */
      .card.flipped {
        background-color: #fff;
      }
    </style>
  </head>
  <body>
    <h1>Memory-Spiel</h1>
    <p>Klicken Sie auf zwei Karten, um zu versuchen, passende Paare zu finden.</p>

    <div id="card-holder"></div>

    <script>
      // Array mit möglichen Werten für die Karten
      var cardValues = ["A", "B", "C", "D", "E", "F", "G", "H"];
      
      // Doppelt so viele Karten erstellen wie es verschiedene Werte gibt
      cardValues = cardValues.concat(cardValues);
      
      // Karten mischlen
      cardValues = shuffle(cardValues);
      
      // Die Karten erstellen
      var cardHolder = document.getElementById("card-holder");
      for (var i = 0; i < cardValues.length; i++) {
        var card = document.createElement("div");
        card.classList.add("card");
        card.dataset.value = cardValues[i];
        card.addEventListener("click", flipCard);
        cardHolder.appendChild(card);
      }
      
      // Variablen zur Überwachung des Spiels
      var firstCard = null;
      var secondCard = null;
      var lock = false;
      
      // Karte umdrehen
      function flipCard() {
        // Überprüft ob ein Spieler bereits am zug ist
        if (lock) {
            return;
        }
        // Überprüft ob diese Karte bereits umgedreht ist
        if (this === firstCard) {
            return;
        }
        this.classList.add("flipped");
        
        // Überprüft ob es die erste oder zweite Karte ist
        if (!firstCard) {
            firstCard = this;
        } else {
            secondCard = this;
            checkForMatch();
        }
      }
      
      // Überprüft ob die Karten ein Paar sind
      function checkForMatch() {
              var isMatch = firstCard.dataset.value === secondCard.dataset.value;
        isMatch ? disableCards() : unflipCards();
      }

      // Deaktiviert Karten wenn es ein Paar ist
      function disableCards() {
        firstCard.removeEventListener("click", flipCard);
        secondCard.removeEventListener("click", flipCard);
        resetBoard();
      }

      // Wendet die Standard-Kartenrückseite an, wenn kein Paar gefunden wurde
      function unflipCards() {
        lock = true;
        setTimeout(() => {
          firstCard.classList.remove("flipped");
          secondCard.classList.remove("flipped");
          resetBoard();
        }, 1500);
      }

      // Setzt Variablen auf den Ausgangszustand zurück, damit ein neuer Zug gestartet werden kann
      function resetBoard() {
        [firstCard, secondCard, lock] = [null, null, false];
      }

      // shuffle() Function wir verwendet um die Karten zu mischlen 
      function shuffle(array) {
        var currentIndex = array.length, temporaryValue, randomIndex;

        while (currentIndex !== 0) {
          randomIndex = Math.floor(Math.random() * currentIndex);
          currentIndex -= 1;
          temporaryValue = array[currentIndex];
          array[currentIndex] = array[randomIndex];
          array[randomIndex] = temporaryValue;
        }
        return array;
      }
    </script>
  </body>
</html>
