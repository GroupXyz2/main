<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Car Race Game</title>
    <style>
      canvas {
        border: 1px solid black;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas" width="400" height="400"></canvas>
    <script>
      var canvas = document.getElementById("canvas");
      var ctx = canvas.getContext("2d");
      var car = {
        x: 175,
        y: 350,
        width: 50,
        height: 75,
        speed: 5
      };
      var obstacles = [];
      var score = 0;
      var gameover = false;
      function drawCar() {
        var img = new Image();
        img.onload = function() {
          ctx.drawImage(img, car.x, car.y, car.width, car.height);
        };
        img.src = "https://www.clipartmax.com/png/middle/118-1183039_88-x-177-px-car-top-view-icon-png.png";
      }
      function drawObstacles() {
        for (var i = 0; i < obstacles.length; i++) {
          ctx.fillStyle = "green";
          ctx.fillRect(obstacles[i].x, obstacles[i].y, obstacles[i].width, obstacles[i].height);
        }
      }
      function moveObstacles() {
        for (var i = 0; i < obstacles.length; i++) {
          obstacles[i].y += 5;
          if (obstacles[i].y > 400) {
            obstacles.splice(i, 1);
            i--;
          }
        }
      }
      function spawnObstacle() {
        var obstacle = {
          x: Math.random() * 300,
          y: 0,
          width: Math.random() * 50 + 50,
          height: 20
        };
        obstacles.push(obstacle);
      }
      function drawScore() {
        ctx.font = "20px Arial";
        ctx.fillStyle = "black";
        ctx.fillText("Score: " + score, 10, 30);
      }
      function detectCollision() {
        for (var i = 0; i < obstacles.length; i++) {
          if (car.x < obstacles[i].x + obstacles[i].width &&
              car.x + car.width > obstacles[i].x &&
              car.y < obstacles[i].y + obstacles[i].height &&
              car.y + car.height > obstacles[i].y) {
            gameover = true;
          }
        }
      }
      function update() {
        if (!gameover) {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          drawCar();
          drawObstacles();
          moveObstacles();
          drawScore();
          detectCollision();
          if (Math.random() < 0.05) {
            spawnObstacle();
          }
          score++;
          car.x += car.speed;
          if (car.x > 350) {
            car.x = 0;
          }
        } else {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.font = "40px Arial";
          ctx.fillStyle = "black";
          ctx.fillText("Game Over", 100, 200);
        }
      }
      setInterval(update, 20);
      document.addEventListener("keydown", function(event) {
        if (event.key === "ArrowLeft") {
          car.x -= car.speed;
        } else if (event.key === "ArrowRight") {
               car.x += car.speed;
        }
        if (car.x < 0) {
          car.x = 350;
        }
      });
      document.addEventListener("touchstart", function(event) {
        if (event.touches[0].clientX < canvas.width/2) {
          car.x -= car.speed;
        } else {
          car.x += car.speed;
        }
      });
    </script>
  </body>
</html>
  
